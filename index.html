<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wishlist App</title>
<style>
body { font-family: Arial; background:#f9f9f9; color:#333; margin:0; padding:20px; text-align:center; }
h1,h2 { color:#555; }
form { margin:20px auto; padding:20px; background:#fff; border-radius:10px; box-shadow:0 4px 6px rgba(0,0,0,0.1); max-width:400px; }
label { display:block; text-align:left; margin-bottom:8px; }
input[type="text"], textarea { width:100%; padding:12px; margin-bottom:15px; border:1px solid #ccc; border-radius:5px; box-sizing:border-box; }
textarea { height:100px; resize: vertical; }
button { padding:10px 20px; font-size:16px; color:#fff; background:#28a745; border:none; border-radius:5px; cursor:pointer; }
button:hover { background:#218838; }
table { width:90%; margin:20px auto; border-collapse:collapse; background:#fff; border-radius:10px; box-shadow:0 4px 6px rgba(0,0,0,0.1); }
th, td { padding:10px; border:1px solid #ddd; text-align:left; vertical-align:top; white-space:pre-wrap; word-wrap:break-word; }
th { background:#f4f4f4; font-weight:bold; }
tr:nth-child(even) { background:#f9f9f9; }
th.Number, td.Number { width:60px; text-align:center; vertical-align:middle; }
th.date-time, td.date-time { width:140px; font-size:12px; color:#555; }
</style>
</head>
<body>

<h1>Submit Your Wishlist</h1>
<form id="wishlistForm">
  <label for="Number">Number:</label>
  <input type="text" id="Number" placeholder="Enter any text" required>

  <label for="wish1">Wish 1:</label>
  <textarea id="wish1" placeholder="Enter your first wish" required></textarea>

  <label for="wish2">Wish 2:</label>
  <textarea id="wish2" placeholder="Enter your second wish" required></textarea>

  <label for="wish3">Wish 3:</label>
  <textarea id="wish3" placeholder="Enter your third wish" required></textarea>

  <button type="submit">Add Wishlist</button>
</form>

<h2>All Wishlists:</h2>
<table>
  <thead>
    <tr>
      <th class="Number">Number</th>
      <th>Wish 1</th>
      <th>Wish 2</th>
      <th>Wish 3</th>
      <th class="date-time">Date & Time</th>
    </tr>
  </thead>
  <tbody id="wishlistsContainer">
    <tr><td colspan="5">Loading...</td></tr>
  </tbody>
</table>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

// ðŸ”¥ Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyB1LyEWBLqJ0awITfLYThWZIkMyBoRnlHk",
  authDomain: "mpdwish.firebaseapp.com",
  databaseURL: "https://mpdwish-default-rtdb.firebaseio.com/",
  projectId: "mpdwish",
  storageBucket: "mpdwish.firebasestorage.app",
  messagingSenderId: "495928837658",
  appId: "1:495928837658:web:4e27b376757e260fd773a3"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const wishlistRef = ref(db, "wishlists");

// Save wishlist
const form = document.getElementById("wishlistForm");
form.addEventListener("submit", e => {
  e.preventDefault();

  const name = document.getElementById("Number").value.trim();
  const wish1 = document.getElementById("wish1").value.trim();
  const wish2 = document.getElementById("wish2").value.trim();
  const wish3 = document.getElementById("wish3").value.trim();

  if (!name || !wish1 || !wish2 || !wish3) {
    alert("Fill all fields!");
    return;
  }

  const timestamp = new Date().toLocaleString("en-PH", { 
    day:"2-digit", month:"short", year:"numeric", 
    hour:"2-digit", minute:"2-digit", hour12:true, 
    timeZone:"Asia/Manila" 
  });

  push(wishlistRef, { name, wish1, wish2, wish3, timestamp })
    .then(() => form.reset())
    .catch(err => alert("Error saving: "+err));
});

// Show wishlists live
const container = document.getElementById("wishlistsContainer");
onValue(wishlistRef, snapshot => {
  container.innerHTML = "";
  if (!snapshot.exists()) {
    container.innerHTML = "<tr><td colspan='5'>No wishlists found.</td></tr>";
    return;
  }
  const data = snapshot.val();
  for (const key in data) {
    const item = data[key];
    container.innerHTML += `
      <tr>
        <td class="Number">${item.name}</td>
        <td>${item.wish1.replace(/\n/g,"<br>")}</td>
        <td>${item.wish2.replace(/\n/g,"<br>")}</td>
        <td>${item.wish3.replace(/\n/g,"<br>")}</td>
        <td class="date-time">${item.timestamp}</td>
      </tr>`;
  }
});
</script>

</body>
</html>
